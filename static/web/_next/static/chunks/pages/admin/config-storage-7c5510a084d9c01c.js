(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7757],{54907:function(e,n,t){"use strict";t.d(n,{Z:function(){return K}});var a=t(87462),r=t(4942),l=t(18073),i=t(94184),c=t.n(i),o=t(74902),s=t(15671),d=t(43144),u=t(60136),p=t(33643),f=t(71002),h=t(50344),v=t(67294),m=t(96774),C=t.n(m),y=t(45987),x=t(62874),g=t(97685),b=v.forwardRef(function(e,n){var t,a=e.prefixCls,l=e.forceRender,i=e.className,o=e.style,s=e.children,d=e.isActive,u=e.role,p=v.useState(d||l),f=(0,g.Z)(p,2),h=f[0],m=f[1];return(v.useEffect(function(){(l||d)&&m(!0)},[l,d]),h)?v.createElement("div",{ref:n,className:c()("".concat(a,"-content"),(t={},(0,r.Z)(t,"".concat(a,"-content-active"),d),(0,r.Z)(t,"".concat(a,"-content-inactive"),!d),t),i),style:o,role:u},v.createElement("div",{className:"".concat(a,"-content-box")},s)):null});b.displayName="PanelContent";var N=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],k=function(e){(0,u.Z)(t,e);var n=(0,p.Z)(t);function t(){var e;(0,s.Z)(this,t);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=n.call.apply(n,[this].concat(r))).onItemClick=function(){var n=e.props,t=n.onItemClick,a=n.panelKey;"function"==typeof t&&t(a)},e.handleKeyPress=function(n){("Enter"===n.key||13===n.keyCode||13===n.which)&&e.onItemClick()},e.renderIcon=function(){var n=e.props,t=n.showArrow,a=n.expandIcon,r=n.prefixCls,l=n.collapsible;if(!t)return null;var i="function"==typeof a?a(e.props):v.createElement("i",{className:"arrow"});return i&&v.createElement("div",{className:"".concat(r,"-expand-icon"),onClick:"header"===l||"icon"===l?e.onItemClick:null},i)},e.renderTitle=function(){var n=e.props,t=n.header,a=n.prefixCls,r=n.collapsible;return v.createElement("span",{className:"".concat(a,"-header-text"),onClick:"header"===r?e.onItemClick:null},t)},e}return(0,d.Z)(t,[{key:"shouldComponentUpdate",value:function(e){return!C()(this.props,e)}},{key:"render",value:function(){var e,n,t=this.props,l=t.className,i=t.id,o=t.style,s=t.prefixCls,d=t.headerClass,u=t.children,p=t.isActive,f=t.destroyInactivePanel,h=t.accordion,m=t.forceRender,C=t.openMotion,g=t.extra,k=t.collapsible,Z=(0,y.Z)(t,N),w="disabled"===k,j="header"===k,E="icon"===k,I=c()((e={},(0,r.Z)(e,"".concat(s,"-item"),!0),(0,r.Z)(e,"".concat(s,"-item-active"),p),(0,r.Z)(e,"".concat(s,"-item-disabled"),w),e),l),P={className:c()("".concat(s,"-header"),(n={},(0,r.Z)(n,d,d),(0,r.Z)(n,"".concat(s,"-header-collapsible-only"),j),(0,r.Z)(n,"".concat(s,"-icon-collapsible-only"),E),n)),"aria-expanded":p,"aria-disabled":w,onKeyPress:this.handleKeyPress};return j||E||(P.onClick=this.onItemClick,P.role=h?"tab":"button",P.tabIndex=w?-1:0),delete Z.header,delete Z.panelKey,delete Z.onItemClick,delete Z.showArrow,delete Z.expandIcon,v.createElement("div",(0,a.Z)({},Z,{className:I,style:o,id:i}),v.createElement("div",P,this.renderIcon(),this.renderTitle(),null!=g&&"boolean"!=typeof g&&v.createElement("div",{className:"".concat(s,"-extra")},g)),v.createElement(x.Z,(0,a.Z)({visible:p,leavedClassName:"".concat(s,"-content-hidden")},C,{forceRender:m,removeOnLeave:f}),function(e,n){var t=e.className,a=e.style;return v.createElement(b,{ref:n,prefixCls:s,className:t,style:a,isActive:p,forceRender:m,role:h?"tabpanel":null},u)}))}}]),t}(v.Component);function Z(e){var n=e;if(!Array.isArray(n)){var t=(0,f.Z)(n);n="number"===t||"string"===t?[n]:[]}return n.map(function(e){return String(e)})}k.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var w=function(e){(0,u.Z)(t,e);var n=(0,p.Z)(t);function t(e){(0,s.Z)(this,t),(a=n.call(this,e)).onClickItem=function(e){var n=a.state.activeKey;if(a.props.accordion)n=n[0]===e?[]:[e];else{var t=(n=(0,o.Z)(n)).indexOf(e);t>-1?n.splice(t,1):n.push(e)}a.setActiveKey(n)},a.getNewChild=function(e,n){if(!e)return null;var t=a.state.activeKey,r=a.props,l=r.prefixCls,i=r.openMotion,c=r.accordion,o=r.destroyInactivePanel,s=r.expandIcon,d=r.collapsible,u=e.key||String(n),p=e.props,f=p.header,h=p.headerClass,m=p.destroyInactivePanel,C=p.collapsible,y=!1;y=c?t[0]===u:t.indexOf(u)>-1;var x=null!=C?C:d,g={key:u,panelKey:u,header:f,headerClass:h,isActive:y,prefixCls:l,destroyInactivePanel:null!=m?m:o,openMotion:i,accordion:c,children:e.props.children,onItemClick:"disabled"===x?null:a.onClickItem,expandIcon:s,collapsible:x};return"string"==typeof e.type?e:(Object.keys(g).forEach(function(e){void 0===g[e]&&delete g[e]}),v.cloneElement(e,g))},a.getItems=function(){var e=a.props.children;return(0,h.Z)(e).map(a.getNewChild)},a.setActiveKey=function(e){"activeKey"in a.props||a.setState({activeKey:e}),a.props.onChange(a.props.accordion?e[0]:e)};var a,r=e.activeKey,l=e.defaultActiveKey;return"activeKey"in e&&(l=r),a.state={activeKey:Z(l)},a}return(0,d.Z)(t,[{key:"shouldComponentUpdate",value:function(e,n){return!C()(this.props,e)||!C()(this.state,n)}},{key:"render",value:function(){var e,n=this.props,t=n.prefixCls,a=n.className,l=n.style,i=n.accordion,o=c()((e={},(0,r.Z)(e,t,!0),(0,r.Z)(e,a,!!a),e));return v.createElement("div",{className:o,style:l,role:i?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var n={};return"activeKey"in e&&(n.activeKey=Z(e.activeKey)),n}}]),t}(v.Component);w.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},w.Panel=k,w.Panel;var j=t(98423),E=t(53124),I=t(33603),P=t(96159),S=function(e){var n,t,i=v.useContext(E.E_),o=i.getPrefixCls,s=i.direction,d=e.prefixCls,u=e.className,p=e.bordered,f=e.ghost,m=e.expandIconPosition,C=void 0===m?"start":m,y=o("collapse",d),x=v.useMemo(function(){return"left"===C?"start":"right"===C?"end":C},[C]),g=c()("".concat(y,"-icon-position-").concat(x),(t={},(0,r.Z)(t,"".concat(y,"-borderless"),!(void 0===p||p)),(0,r.Z)(t,"".concat(y,"-rtl"),"rtl"===s),(0,r.Z)(t,"".concat(y,"-ghost"),!!f),t),void 0===u?"":u),b=(0,a.Z)((0,a.Z)({},I.ZP),{motionAppear:!1,leavedClassName:"".concat(y,"-content-hidden")});return v.createElement(w,(0,a.Z)({openMotion:b},e,{expandIcon:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expandIcon,a=t?t(n):v.createElement(l.Z,{rotate:n.isActive?90:void 0});return(0,P.Tm)(a,function(){return{className:c()(a.props.className,"".concat(y,"-arrow"))}})},prefixCls:y,className:g}),(n=e.children,(0,h.Z)(n).map(function(e,n){var t;if(null===(t=e.props)||void 0===t?void 0:t.disabled){var r=e.key||String(n),l=e.props,i=l.disabled,c=l.collapsible,o=(0,a.Z)((0,a.Z)({},(0,j.Z)(e.props,["disabled"])),{key:r,collapsible:null!=c?c:i?"disabled":void 0});return(0,P.Tm)(e,o)}return e})))};S.Panel=function(e){var n=v.useContext(E.E_).getPrefixCls,t=e.prefixCls,l=e.className,i=e.showArrow,o=n("collapse",t),s=c()((0,r.Z)({},"".concat(o,"-no-arrow"),!(void 0===i||i)),void 0===l?"":l);return v.createElement(w.Panel,(0,a.Z)({},e,{prefixCls:o,className:s}))};var K=S},94594:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var a=t(87462),r=t(4942),l=t(50888),i=t(94184),c=t.n(i),o=t(97685),s=t(45987),d=t(67294),u=t(21770),p=t(15105),f=d.forwardRef(function(e,n){var t,a=e.prefixCls,l=void 0===a?"rc-switch":a,i=e.className,f=e.checked,h=e.defaultChecked,v=e.disabled,m=e.loadingIcon,C=e.checkedChildren,y=e.unCheckedChildren,x=e.onClick,g=e.onChange,b=e.onKeyDown,N=(0,s.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),k=(0,u.Z)(!1,{value:f,defaultValue:h}),Z=(0,o.Z)(k,2),w=Z[0],j=Z[1];function E(e,n){var t=w;return v||(j(t=e),null==g||g(t,n)),t}var I=c()(l,i,(t={},(0,r.Z)(t,"".concat(l,"-checked"),w),(0,r.Z)(t,"".concat(l,"-disabled"),v),t));return d.createElement("button",Object.assign({},N,{type:"button",role:"switch","aria-checked":w,disabled:v,className:I,ref:n,onKeyDown:function(e){e.which===p.Z.LEFT?E(!1,e):e.which===p.Z.RIGHT&&E(!0,e),null==b||b(e)},onClick:function(e){var n=E(!w,e);null==x||x(n,e)}}),m,d.createElement("span",{className:"".concat(l,"-inner")},w?C:y))});f.displayName="Switch";var h=t(53124),v=t(98866),m=t(97647),C=t(68349),y=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>n.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]]);return t},x=d.forwardRef(function(e,n){var t,i=e.prefixCls,o=e.size,s=e.disabled,u=e.loading,p=e.className,x=y(e,["prefixCls","size","disabled","loading","className"]),g=d.useContext(h.E_),b=g.getPrefixCls,N=g.direction,k=d.useContext(m.Z),Z=d.useContext(v.Z),w=b("switch",i),j=d.createElement("div",{className:"".concat(w,"-handle")},u&&d.createElement(l.Z,{className:"".concat(w,"-loading-icon")})),E=c()((t={},(0,r.Z)(t,"".concat(w,"-small"),"small"===(o||k)),(0,r.Z)(t,"".concat(w,"-loading"),u),(0,r.Z)(t,"".concat(w,"-rtl"),"rtl"===N),t),void 0===p?"":p);return d.createElement(C.Z,{insertExtraNode:!0},d.createElement(f,(0,a.Z)({},x,{prefixCls:w,className:E,disabled:(null!=s?s:Z)||u,ref:n,loadingIcon:j})))});x.__ANT_SWITCH=!0;var g=x},79128:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-storage",function(){return t(51290)}])},73706:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var a=t(85893),r=t(67294),l=t(94594),i=t(41983),c=t(39664),o=t(90745),s=t(99519);let d=e=>{let{apiPath:n,checked:t,reversed:d=!1,configPath:u="",disabled:p=!1,fieldName:f,label:h,tip:v,useSubmit:m,onChange:C}=e,[y,x]=(0,r.useState)(null),g=null,b=(0,r.useContext)(s.aC),{setFieldInConfigState:N}=b||{},k=()=>{x(null),clearTimeout(g),g=null},Z=async e=>{if(m){x((0,i.kg)(i.Jk));let t=d?!e:e;await (0,o.Si)({apiPath:n,data:{value:t},onSuccess(){N({fieldName:f,value:t,path:u}),x((0,i.kg)(i.zv))},onError(e){x((0,i.kg)(i.Un,"There was an error: ".concat(e)))}}),g=setTimeout(k,o.sI)}C&&C(e)},w=null!==y&&y.type===i.Jk;return(0,a.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[h&&(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:h})}),(0,a.jsxs)("div",{className:"input-side",children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)(l.Z,{className:"switch field-".concat(f),loading:w,onChange:Z,defaultChecked:t,checked:t,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:p}),(0,a.jsx)(c.E,{status:y})]}),(0,a.jsx)("p",{className:"field-tip",children:v})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},51290:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var a=t(85893),r=t(84485),l=t(67294),i=t(54907),c=t(71577),o=t(94184),s=t.n(o),d=t(99519),u=t(82661),p=t(90745),f=t(41983),h=t(40117),v=t(39664),m=t(37174),C=t(73706);let{Panel:y}=i.Z,x=()=>{let[e,n]=(0,l.useState)(null),[t,r]=(0,l.useState)(null),[o,x]=(0,l.useState)(!1),g=(0,l.useContext)(d.aC),{serverConfig:b,setFieldInConfigState:N}=g||{},{setMessage:k}=(0,l.useContext)(u.k),{s3:Z}=b,{accessKey:w="",acl:j="",bucket:E="",enabled:I=!1,endpoint:P="",region:S="",secret:K="",servingEndpoint:O="",forcePathStyle:A=!1}=Z;if((0,l.useEffect)(()=>{n({accessKey:w,acl:j,bucket:E,enabled:I,endpoint:P,region:S,secret:K,servingEndpoint:O,forcePathStyle:A}),x(I)},[Z]),!e)return null;let _=()=>{r(null),clearTimeout(null)},T=t=>{let{fieldName:a,value:r}=t;n({...e,[a]:r})},z=async()=>{r((0,f.kg)(f.Jk)),await (0,p.Si)({apiPath:p.$w,data:{value:e},onSuccess(){N({fieldName:"s3",value:e,path:""}),r((0,f.kg)(f.zv,"Updated.")),setTimeout(_,p.sI),k("Changing your storage configuration will take place the next time you start a new stream.")},onError(e){r((0,f.kg)(f.Un,e)),setTimeout(_,p.sI)}})},R=e=>{x(e),T({fieldName:"enabled",value:e})},D=e=>{T({fieldName:"forcePathStyle",value:e})},M=s()({"edit-storage-container":!0,"form-module":!0,enabled:o}),U=function(e,n){let{endpoint:t,accessKey:a,secret:r,bucket:l,region:i,enabled:c,servingEndpoint:o,acl:s,forcePathStyle:d}=e;if(c){if(t&&(0,m.Z)(t)&&a&&r&&l&&i&&(c!==n.enabled||t!==n.endpoint||a!==n.accessKey||r!==n.secret||l!==n.bucket||i!==n.region||!n.servingEndpoint&&""!==o||n.servingEndpoint&&o!==n.servingEndpoint||!n.acl&&""!==s||n.acl&&s!==n.acl||d!==n.forcePathStyle))return!0}else if(c!==n.enabled)return!0;return!1}(e,Z);return(0,a.jsxs)("div",{className:M,children:[(0,a.jsx)("div",{className:"enable-switch",children:(0,a.jsx)(C.Z,{apiPath:"",fieldName:"enabled",label:"Use S3 Storage Provider",checked:e.enabled,onChange:R})}),(0,a.jsxs)("div",{className:"form-fields",children:[(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.endpoint,value:e.endpoint,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.accessKey,value:e.accessKey,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.secret,value:e.secret,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.bucket,value:e.bucket,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.region,value:e.region,onChange:T})}),(0,a.jsx)(i.Z,{className:"advanced-section",children:(0,a.jsxs)(y,{header:"Optional Settings",children:[(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.acl,value:e.acl,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.servingEndpoint,value:e.servingEndpoint,onChange:T})}),(0,a.jsx)("div",{className:"enable-switch",children:(0,a.jsx)(C.Z,{...p.zm.forcePathStyle,fieldName:"forcePathStyle",checked:e.forcePathStyle,onChange:D})})]},"1")})]}),(0,a.jsxs)("div",{className:"button-container",children:[(0,a.jsx)(c.Z,{type:"primary",onClick:z,disabled:!U,children:"Save"}),(0,a.jsx)(v.E,{status:t})]})]})},{Title:g}=r.Z;function b(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{children:"Storage"}),(0,a.jsxs)("p",{className:"description",children:["Owncast supports optionally using external storage providers to stream your video. Learn more about this by visiting our"," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/storage/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Storage Documentation"}),"."]}),(0,a.jsx)("p",{className:"description",children:"Configuring this incorrectly will likely cause your video to be unplayable. Double check the documentation for your storage provider on how to configure the bucket you created for Owncast."}),(0,a.jsx)("p",{className:"description",children:"Keep in mind this is for live streaming, not for archival, recording or VOD purposes."}),(0,a.jsx)(x,{})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=79128)}),_N_E=e.O()}]);