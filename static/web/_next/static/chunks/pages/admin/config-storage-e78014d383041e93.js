(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7757],{54907:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return collapse}});var esm_extends=__webpack_require__(87462),defineProperty=__webpack_require__(4942),RightOutlined=__webpack_require__(18073),classnames=__webpack_require__(94184),classnames_default=__webpack_require__.n(classnames),toConsumableArray=__webpack_require__(74902),classCallCheck=__webpack_require__(15671),createClass=__webpack_require__(43144),inherits=__webpack_require__(60136),createSuper=__webpack_require__(33643),esm_typeof=__webpack_require__(71002),toArray=__webpack_require__(50344),react=__webpack_require__(67294),shallowequal=__webpack_require__(96774),shallowequal_default=__webpack_require__.n(shallowequal),objectWithoutProperties=__webpack_require__(45987),es=__webpack_require__(62874),slicedToArray=__webpack_require__(97685),PanelContent=react.forwardRef(function(props,ref){var _classnames,prefixCls=props.prefixCls,forceRender=props.forceRender,className=props.className,style=props.style,children=props.children,isActive=props.isActive,role=props.role,_React$useState=react.useState(isActive||forceRender),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),rendered=_React$useState2[0],setRendered=_React$useState2[1];return(react.useEffect(function(){(forceRender||isActive)&&setRendered(!0)},[forceRender,isActive]),rendered)?react.createElement("div",{ref:ref,className:classnames_default()("".concat(prefixCls,"-content"),(_classnames={},(0,defineProperty.Z)(_classnames,"".concat(prefixCls,"-content-active"),isActive),(0,defineProperty.Z)(_classnames,"".concat(prefixCls,"-content-inactive"),!isActive),_classnames),className),style:style,role:role},react.createElement("div",{className:"".concat(prefixCls,"-content-box")},children)):null});PanelContent.displayName="PanelContent";var _excluded=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],CollapsePanel=function(_React$Component){(0,inherits.Z)(CollapsePanel,_React$Component);var _super=(0,createSuper.Z)(CollapsePanel);function CollapsePanel(){var _this;(0,classCallCheck.Z)(this,CollapsePanel);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).onItemClick=function(){var _this$props=_this.props,onItemClick=_this$props.onItemClick,panelKey=_this$props.panelKey;"function"==typeof onItemClick&&onItemClick(panelKey)},_this.handleKeyPress=function(e){("Enter"===e.key||13===e.keyCode||13===e.which)&&_this.onItemClick()},_this.renderIcon=function(){var _this$props2=_this.props,showArrow=_this$props2.showArrow,expandIcon=_this$props2.expandIcon,prefixCls=_this$props2.prefixCls,collapsible=_this$props2.collapsible;if(!showArrow)return null;var iconNode="function"==typeof expandIcon?expandIcon(_this.props):react.createElement("i",{className:"arrow"});return iconNode&&react.createElement("div",{className:"".concat(prefixCls,"-expand-icon"),onClick:"header"===collapsible||"icon"===collapsible?_this.onItemClick:null},iconNode)},_this.renderTitle=function(){var _this$props3=_this.props,header=_this$props3.header,prefixCls=_this$props3.prefixCls,collapsible=_this$props3.collapsible;return react.createElement("span",{className:"".concat(prefixCls,"-header-text"),onClick:"header"===collapsible?_this.onItemClick:null},header)},_this}return(0,createClass.Z)(CollapsePanel,[{key:"shouldComponentUpdate",value:function(nextProps){return!shallowequal_default()(this.props,nextProps)}},{key:"render",value:function(){var _classNames,_classNames2,_this$props4=this.props,className=_this$props4.className,id=_this$props4.id,style=_this$props4.style,prefixCls=_this$props4.prefixCls,headerClass=_this$props4.headerClass,children=_this$props4.children,isActive=_this$props4.isActive,destroyInactivePanel=_this$props4.destroyInactivePanel,accordion=_this$props4.accordion,forceRender=_this$props4.forceRender,openMotion=_this$props4.openMotion,extra=_this$props4.extra,collapsible=_this$props4.collapsible,rest=(0,objectWithoutProperties.Z)(_this$props4,_excluded),disabled="disabled"===collapsible,collapsibleHeader="header"===collapsible,collapsibleIcon="icon"===collapsible,itemCls=classnames_default()((_classNames={},(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-item"),!0),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-item-active"),isActive),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-item-disabled"),disabled),_classNames),className),headerProps={className:classnames_default()("".concat(prefixCls,"-header"),(_classNames2={},(0,defineProperty.Z)(_classNames2,headerClass,headerClass),(0,defineProperty.Z)(_classNames2,"".concat(prefixCls,"-header-collapsible-only"),collapsibleHeader),(0,defineProperty.Z)(_classNames2,"".concat(prefixCls,"-icon-collapsible-only"),collapsibleIcon),_classNames2)),"aria-expanded":isActive,"aria-disabled":disabled,onKeyPress:this.handleKeyPress};return collapsibleHeader||collapsibleIcon||(headerProps.onClick=this.onItemClick,headerProps.role=accordion?"tab":"button",headerProps.tabIndex=disabled?-1:0),delete rest.header,delete rest.panelKey,delete rest.onItemClick,delete rest.showArrow,delete rest.expandIcon,react.createElement("div",(0,esm_extends.Z)({},rest,{className:itemCls,style:style,id:id}),react.createElement("div",headerProps,this.renderIcon(),this.renderTitle(),null!=extra&&"boolean"!=typeof extra&&react.createElement("div",{className:"".concat(prefixCls,"-extra")},extra)),react.createElement(es.Z,(0,esm_extends.Z)({visible:isActive,leavedClassName:"".concat(prefixCls,"-content-hidden")},openMotion,{forceRender:forceRender,removeOnLeave:destroyInactivePanel}),function(_ref,ref){var motionClassName=_ref.className,motionStyle=_ref.style;return react.createElement(PanelContent,{ref:ref,prefixCls:prefixCls,className:motionClassName,style:motionStyle,isActive:isActive,forceRender:forceRender,role:accordion?"tabpanel":null},children)}))}}]),CollapsePanel}(react.Component);function getActiveKeysArray(activeKey){var currentActiveKey=activeKey;if(!Array.isArray(currentActiveKey)){var activeKeyType=(0,esm_typeof.Z)(currentActiveKey);currentActiveKey="number"===activeKeyType||"string"===activeKeyType?[currentActiveKey]:[]}return currentActiveKey.map(function(key){return String(key)})}CollapsePanel.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var Collapse=function(_React$Component){(0,inherits.Z)(Collapse,_React$Component);var _super=(0,createSuper.Z)(Collapse);function Collapse(_props){(0,classCallCheck.Z)(this,Collapse),(_this=_super.call(this,_props)).onClickItem=function(key){var activeKey=_this.state.activeKey;if(_this.props.accordion)activeKey=activeKey[0]===key?[]:[key];else{var index=(activeKey=(0,toConsumableArray.Z)(activeKey)).indexOf(key);index>-1?activeKey.splice(index,1):activeKey.push(key)}_this.setActiveKey(activeKey)},_this.getNewChild=function(child,index){if(!child)return null;var activeKey=_this.state.activeKey,_this$props=_this.props,prefixCls=_this$props.prefixCls,openMotion=_this$props.openMotion,accordion=_this$props.accordion,rootDestroyInactivePanel=_this$props.destroyInactivePanel,expandIcon=_this$props.expandIcon,collapsible=_this$props.collapsible,key=child.key||String(index),_child$props=child.props,header=_child$props.header,headerClass=_child$props.headerClass,destroyInactivePanel=_child$props.destroyInactivePanel,childCollapsible=_child$props.collapsible,isActive=!1;isActive=accordion?activeKey[0]===key:activeKey.indexOf(key)>-1;var mergeCollapsible=null!=childCollapsible?childCollapsible:collapsible,props={key:key,panelKey:key,header:header,headerClass:headerClass,isActive:isActive,prefixCls:prefixCls,destroyInactivePanel:null!=destroyInactivePanel?destroyInactivePanel:rootDestroyInactivePanel,openMotion:openMotion,accordion:accordion,children:child.props.children,onItemClick:"disabled"===mergeCollapsible?null:_this.onClickItem,expandIcon:expandIcon,collapsible:mergeCollapsible};return"string"==typeof child.type?child:(Object.keys(props).forEach(function(propName){void 0===props[propName]&&delete props[propName]}),react.cloneElement(child,props))},_this.getItems=function(){var children=_this.props.children;return(0,toArray.Z)(children).map(_this.getNewChild)},_this.setActiveKey=function(activeKey){"activeKey"in _this.props||_this.setState({activeKey:activeKey}),_this.props.onChange(_this.props.accordion?activeKey[0]:activeKey)};var _this,_activeKey=_props.activeKey,currentActiveKey=_props.defaultActiveKey;return"activeKey"in _props&&(currentActiveKey=_activeKey),_this.state={activeKey:getActiveKeysArray(currentActiveKey)},_this}return(0,createClass.Z)(Collapse,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return!shallowequal_default()(this.props,nextProps)||!shallowequal_default()(this.state,nextState)}},{key:"render",value:function(){var _classNames,_this$props2=this.props,prefixCls=_this$props2.prefixCls,className=_this$props2.className,style=_this$props2.style,accordion=_this$props2.accordion,collapseClassName=classnames_default()((_classNames={},(0,defineProperty.Z)(_classNames,prefixCls,!0),(0,defineProperty.Z)(_classNames,className,!!className),_classNames));return react.createElement("div",{className:collapseClassName,style:style,role:accordion?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(nextProps){var newState={};return"activeKey"in nextProps&&(newState.activeKey=getActiveKeysArray(nextProps.activeKey)),newState}}]),Collapse}(react.Component);Collapse.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},Collapse.Panel=CollapsePanel,Collapse.Panel;var omit=__webpack_require__(98423),context=__webpack_require__(53124),motion=__webpack_require__(33603),reactNode=__webpack_require__(96159),Collapse_Collapse=function(props){var children,_classNames,_React$useContext=react.useContext(context.E_),getPrefixCls=_React$useContext.getPrefixCls,direction=_React$useContext.direction,customizePrefixCls=props.prefixCls,_props$className=props.className,_props$bordered=props.bordered,ghost=props.ghost,_props$expandIconPosi=props.expandIconPosition,expandIconPosition=void 0===_props$expandIconPosi?"start":_props$expandIconPosi,prefixCls=getPrefixCls("collapse",customizePrefixCls),mergedExpandIconPosition=react.useMemo(function(){return"left"===expandIconPosition?"start":"right"===expandIconPosition?"end":expandIconPosition},[expandIconPosition]),collapseClassName=classnames_default()("".concat(prefixCls,"-icon-position-").concat(mergedExpandIconPosition),(_classNames={},(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-borderless"),!(void 0===_props$bordered||_props$bordered)),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-rtl"),"rtl"===direction),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-ghost"),!!ghost),_classNames),void 0===_props$className?"":_props$className),openMotion=(0,esm_extends.Z)((0,esm_extends.Z)({},motion.ZP),{motionAppear:!1,leavedClassName:"".concat(prefixCls,"-content-hidden")});return react.createElement(Collapse,(0,esm_extends.Z)({openMotion:openMotion},props,{expandIcon:function(){var panelProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},expandIcon=props.expandIcon,icon=expandIcon?expandIcon(panelProps):react.createElement(RightOutlined.Z,{rotate:panelProps.isActive?90:void 0});return(0,reactNode.Tm)(icon,function(){return{className:classnames_default()(icon.props.className,"".concat(prefixCls,"-arrow"))}})},prefixCls:prefixCls,className:collapseClassName}),(children=props.children,(0,toArray.Z)(children).map(function(child,index){var _a;if(null===(_a=child.props)||void 0===_a?void 0:_a.disabled){var key=child.key||String(index),_child$props=child.props,disabled=_child$props.disabled,collapsible=_child$props.collapsible,childProps=(0,esm_extends.Z)((0,esm_extends.Z)({},(0,omit.Z)(child.props,["disabled"])),{key:key,collapsible:null!=collapsible?collapsible:disabled?"disabled":void 0});return(0,reactNode.Tm)(child,childProps)}return child})))};Collapse_Collapse.Panel=function(props){var getPrefixCls=react.useContext(context.E_).getPrefixCls,customizePrefixCls=props.prefixCls,_props$className=props.className,_props$showArrow=props.showArrow,prefixCls=getPrefixCls("collapse",customizePrefixCls),collapsePanelClassName=classnames_default()((0,defineProperty.Z)({},"".concat(prefixCls,"-no-arrow"),!(void 0===_props$showArrow||_props$showArrow)),void 0===_props$className?"":_props$className);return react.createElement(Collapse.Panel,(0,esm_extends.Z)({},props,{prefixCls:prefixCls,className:collapsePanelClassName}))};var collapse=Collapse_Collapse},94594:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return es_switch}});var esm_extends=__webpack_require__(87462),defineProperty=__webpack_require__(4942),LoadingOutlined=__webpack_require__(50888),classnames=__webpack_require__(94184),classnames_default=__webpack_require__.n(classnames),slicedToArray=__webpack_require__(97685),objectWithoutProperties=__webpack_require__(45987),react=__webpack_require__(67294),useMergedState=__webpack_require__(21770),KeyCode=__webpack_require__(15105),Switch=react.forwardRef(function(_ref,ref){var _classNames,_ref$prefixCls=_ref.prefixCls,prefixCls=void 0===_ref$prefixCls?"rc-switch":_ref$prefixCls,className=_ref.className,checked=_ref.checked,defaultChecked=_ref.defaultChecked,disabled=_ref.disabled,loadingIcon=_ref.loadingIcon,checkedChildren=_ref.checkedChildren,unCheckedChildren=_ref.unCheckedChildren,onClick=_ref.onClick,onChange=_ref.onChange,onKeyDown=_ref.onKeyDown,restProps=(0,objectWithoutProperties.Z)(_ref,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),_useMergedState=(0,useMergedState.Z)(!1,{value:checked,defaultValue:defaultChecked}),_useMergedState2=(0,slicedToArray.Z)(_useMergedState,2),innerChecked=_useMergedState2[0],setInnerChecked=_useMergedState2[1];function triggerChange(newChecked,event){var mergedChecked=innerChecked;return disabled||(setInnerChecked(mergedChecked=newChecked),null==onChange||onChange(mergedChecked,event)),mergedChecked}var switchClassName=classnames_default()(prefixCls,className,(_classNames={},(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-checked"),innerChecked),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-disabled"),disabled),_classNames));return react.createElement("button",Object.assign({},restProps,{type:"button",role:"switch","aria-checked":innerChecked,disabled:disabled,className:switchClassName,ref:ref,onKeyDown:function(e){e.which===KeyCode.Z.LEFT?triggerChange(!1,e):e.which===KeyCode.Z.RIGHT&&triggerChange(!0,e),null==onKeyDown||onKeyDown(e)},onClick:function(e){var ret=triggerChange(!innerChecked,e);null==onClick||onClick(ret,e)}}),loadingIcon,react.createElement("span",{className:"".concat(prefixCls,"-inner")},innerChecked?checkedChildren:unCheckedChildren))});Switch.displayName="Switch";var context=__webpack_require__(53124),DisabledContext=__webpack_require__(98866),SizeContext=__webpack_require__(97647),wave=__webpack_require__(68349),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t},switch_Switch=react.forwardRef(function(_a,ref){var _classNames,customizePrefixCls=_a.prefixCls,customizeSize=_a.size,customDisabled=_a.disabled,loading=_a.loading,_a$className=_a.className,props=__rest(_a,["prefixCls","size","disabled","loading","className"]),_React$useContext=react.useContext(context.E_),getPrefixCls=_React$useContext.getPrefixCls,direction=_React$useContext.direction,size=react.useContext(SizeContext.Z),disabled=react.useContext(DisabledContext.Z),prefixCls=getPrefixCls("switch",customizePrefixCls),loadingIcon=react.createElement("div",{className:"".concat(prefixCls,"-handle")},loading&&react.createElement(LoadingOutlined.Z,{className:"".concat(prefixCls,"-loading-icon")})),classes=classnames_default()((_classNames={},(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-small"),"small"===(customizeSize||size)),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-loading"),loading),(0,defineProperty.Z)(_classNames,"".concat(prefixCls,"-rtl"),"rtl"===direction),_classNames),void 0===_a$className?"":_a$className);return react.createElement(wave.Z,{insertExtraNode:!0},react.createElement(Switch,(0,esm_extends.Z)({},props,{prefixCls:prefixCls,className:classes,disabled:(null!=customDisabled?customDisabled:disabled)||loading,ref:ref,loadingIcon:loadingIcon})))});switch_Switch.__ANT_SWITCH=!0;var es_switch=switch_Switch},79128:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-storage",function(){return __webpack_require__(51290)}])},73706:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return ToggleSwitch}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67294),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(94594),_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41983),_FormStatusIndicator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39664),_utils_config_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(90745),_utils_server_status_context__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99519);let ToggleSwitch=param=>{let{apiPath,checked,reversed=!1,configPath="",disabled=!1,fieldName,label,tip,useSubmit,onChange}=param,[submitStatus,setSubmitStatus]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),resetTimer=null,serverStatusData=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_utils_server_status_context__WEBPACK_IMPORTED_MODULE_5__.aC),{setFieldInConfigState}=serverStatusData||{},resetStates=()=>{setSubmitStatus(null),clearTimeout(resetTimer),resetTimer=null},handleChange=async isChecked=>{if(useSubmit){setSubmitStatus((0,_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__.kg)(_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__.Jk));let isCheckedSend=reversed?!isChecked:isChecked;await (0,_utils_config_constants__WEBPACK_IMPORTED_MODULE_4__.Si)({apiPath,data:{value:isCheckedSend},onSuccess(){setFieldInConfigState({fieldName,value:isCheckedSend,path:configPath}),setSubmitStatus((0,_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__.kg)(_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__.zv))},onError(message){setSubmitStatus((0,_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__.kg)(_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__.Un,"There was an error: ".concat(message)))}}),resetTimer=setTimeout(resetStates,_utils_config_constants__WEBPACK_IMPORTED_MODULE_4__.sI)}onChange&&onChange(isChecked)},loading=null!==submitStatus&&submitStatus.type===_utils_input_statuses__WEBPACK_IMPORTED_MODULE_2__.Jk;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"label-side",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"formfield-label",children:label})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-side",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"input-group",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.Z,{className:"switch field-".concat(fieldName),loading:loading,onChange:handleChange,defaultChecked:checked,checked:checked,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:disabled}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_FormStatusIndicator__WEBPACK_IMPORTED_MODULE_3__.E,{status:submitStatus})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"field-tip",children:tip})]})]})};ToggleSwitch.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},51290:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return ConfigStorageInfo}});var jsx_runtime=__webpack_require__(85893),typography=__webpack_require__(84485),react=__webpack_require__(67294),collapse=__webpack_require__(54907),es_button=__webpack_require__(71577),classnames=__webpack_require__(94184),classnames_default=__webpack_require__.n(classnames),server_status_context=__webpack_require__(99519),alert_message_context=__webpack_require__(82661),config_constants=__webpack_require__(90745),input_statuses=__webpack_require__(41983),TextField=__webpack_require__(40117),FormStatusIndicator=__webpack_require__(39664),urls=__webpack_require__(37174),ToggleSwitch=__webpack_require__(73706);let{Panel}=collapse.Z,EditStorage=()=>{let[formDataValues,setFormDataValues]=(0,react.useState)(null),[submitStatus,setSubmitStatus]=(0,react.useState)(null),[shouldDisplayForm,setShouldDisplayForm]=(0,react.useState)(!1),serverStatusData=(0,react.useContext)(server_status_context.aC),{serverConfig,setFieldInConfigState}=serverStatusData||{},{setMessage:setAlertMessage}=(0,react.useContext)(alert_message_context.k),{s3}=serverConfig,{accessKey="",acl="",bucket="",enabled=!1,endpoint="",region="",secret="",servingEndpoint="",forcePathStyle=!1}=s3;if((0,react.useEffect)(()=>{setFormDataValues({accessKey,acl,bucket,enabled,endpoint,region,secret,servingEndpoint,forcePathStyle}),setShouldDisplayForm(enabled)},[s3]),!formDataValues)return null;let resetStates=()=>{setSubmitStatus(null),clearTimeout(null)},handleFieldChange=param=>{let{fieldName,value}=param;setFormDataValues({...formDataValues,[fieldName]:value})},handleSave=async()=>{setSubmitStatus((0,input_statuses.kg)(input_statuses.Jk)),await (0,config_constants.Si)({apiPath:config_constants.$w,data:{value:formDataValues},onSuccess(){setFieldInConfigState({fieldName:"s3",value:formDataValues,path:""}),setSubmitStatus((0,input_statuses.kg)(input_statuses.zv,"Updated.")),setTimeout(resetStates,config_constants.sI),setAlertMessage("Changing your storage configuration will take place the next time you start a new stream.")},onError(message){setSubmitStatus((0,input_statuses.kg)(input_statuses.Un,message)),setTimeout(resetStates,config_constants.sI)}})},handleSwitchChange=storageEnabled=>{setShouldDisplayForm(storageEnabled),handleFieldChange({fieldName:"enabled",value:storageEnabled})},handleForcePathStyleSwitchChange=forcePathStyleEnabled=>{handleFieldChange({fieldName:"forcePathStyle",value:forcePathStyleEnabled})},containerClass=classnames_default()({"edit-storage-container":!0,"form-module":!0,enabled:shouldDisplayForm}),isSaveable=function(formValues,currentValues){let{endpoint,accessKey,secret,bucket,region,enabled,servingEndpoint,acl,forcePathStyle}=formValues;if(enabled){if(endpoint&&(0,urls.Z)(endpoint)&&accessKey&&secret&&bucket&&region&&(enabled!==currentValues.enabled||endpoint!==currentValues.endpoint||accessKey!==currentValues.accessKey||secret!==currentValues.secret||region!==currentValues.region||!currentValues.servingEndpoint&&""!==servingEndpoint||currentValues.servingEndpoint&&servingEndpoint!==currentValues.servingEndpoint||!currentValues.acl&&""!==acl||currentValues.acl&&acl!==currentValues.acl||forcePathStyle!==currentValues.forcePathStyle))return!0}else if(enabled!==currentValues.enabled)return!0;return!1}(formDataValues,s3);return(0,jsx_runtime.jsxs)("div",{className:containerClass,children:[(0,jsx_runtime.jsx)("div",{className:"enable-switch",children:(0,jsx_runtime.jsx)(ToggleSwitch.Z,{apiPath:"",fieldName:"enabled",label:"Use S3 Storage Provider",checked:formDataValues.enabled,onChange:handleSwitchChange})}),(0,jsx_runtime.jsxs)("div",{className:"form-fields",children:[(0,jsx_runtime.jsx)("div",{className:"field-container",children:(0,jsx_runtime.jsx)(TextField.nv,{...config_constants.zm.endpoint,value:formDataValues.endpoint,onChange:handleFieldChange})}),(0,jsx_runtime.jsx)("div",{className:"field-container",children:(0,jsx_runtime.jsx)(TextField.nv,{...config_constants.zm.accessKey,value:formDataValues.accessKey,onChange:handleFieldChange})}),(0,jsx_runtime.jsx)("div",{className:"field-container",children:(0,jsx_runtime.jsx)(TextField.nv,{...config_constants.zm.secret,value:formDataValues.secret,onChange:handleFieldChange})}),(0,jsx_runtime.jsx)("div",{className:"field-container",children:(0,jsx_runtime.jsx)(TextField.nv,{...config_constants.zm.bucket,value:formDataValues.bucket,onChange:handleFieldChange})}),(0,jsx_runtime.jsx)("div",{className:"field-container",children:(0,jsx_runtime.jsx)(TextField.nv,{...config_constants.zm.region,value:formDataValues.region,onChange:handleFieldChange})}),(0,jsx_runtime.jsx)(collapse.Z,{className:"advanced-section",children:(0,jsx_runtime.jsxs)(Panel,{header:"Optional Settings",children:[(0,jsx_runtime.jsx)("div",{className:"field-container",children:(0,jsx_runtime.jsx)(TextField.nv,{...config_constants.zm.acl,value:formDataValues.acl,onChange:handleFieldChange})}),(0,jsx_runtime.jsx)("div",{className:"field-container",children:(0,jsx_runtime.jsx)(TextField.nv,{...config_constants.zm.servingEndpoint,value:formDataValues.servingEndpoint,onChange:handleFieldChange})}),(0,jsx_runtime.jsx)("div",{className:"enable-switch",children:(0,jsx_runtime.jsx)(ToggleSwitch.Z,{...config_constants.zm.forcePathStyle,fieldName:"forcePathStyle",checked:formDataValues.forcePathStyle,onChange:handleForcePathStyleSwitchChange})})]},"1")})]}),(0,jsx_runtime.jsxs)("div",{className:"button-container",children:[(0,jsx_runtime.jsx)(es_button.Z,{type:"primary",onClick:handleSave,disabled:!isSaveable,children:"Save"}),(0,jsx_runtime.jsx)(FormStatusIndicator.E,{status:submitStatus})]})]})},{Title}=typography.Z;function ConfigStorageInfo(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Title,{children:"Storage"}),(0,jsx_runtime.jsxs)("p",{className:"description",children:["Owncast supports optionally using external storage providers to stream your video. Learn more about this by visiting our"," ",(0,jsx_runtime.jsx)("a",{href:"https://owncast.online/docs/storage/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Storage Documentation"}),"."]}),(0,jsx_runtime.jsx)("p",{className:"description",children:"Configuring this incorrectly will likely cause your video to be unplayable. Double check the documentation for your storage provider on how to configure the bucket you created for Owncast."}),(0,jsx_runtime.jsx)("p",{className:"description",children:"Keep in mind this is for live streaming, not for archival, recording or VOD purposes."}),(0,jsx_runtime.jsx)(EditStorage,{})]})}}},function(__webpack_require__){__webpack_require__.O(0,[9774,2888,179],function(){return __webpack_require__(__webpack_require__.s=79128)}),_N_E=__webpack_require__.O()}]);