(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return icons_DeleteOutlined}});var objectSpread2=__webpack_require__(1413),react=__webpack_require__(67294),asn_DeleteOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},AntdIcon=__webpack_require__(42135),DeleteOutlined_DeleteOutlined=function(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref:ref,icon:asn_DeleteOutlined}))};DeleteOutlined_DeleteOutlined.displayName="DeleteOutlined";var icons_DeleteOutlined=react.forwardRef(DeleteOutlined_DeleteOutlined)},27561:function(module,__unused_webpack_exports,__webpack_require__){var trimmedEndIndex=__webpack_require__(67990),reTrimStart=/^\s+/;module.exports=function(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}},67990:function(module){var reWhitespace=/\s/;module.exports=function(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}},23279:function(module,__unused_webpack_exports,__webpack_require__){var isObject=__webpack_require__(13218),now=__webpack_require__(7771),toNumber=__webpack_require__(14841),nativeMax=Math.max,nativeMin=Math.min;module.exports=function(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var timeSinceLastCall,timeSinceLastInvoke,timeWaiting,time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,(timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall,maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting))}function trailingEdge(time){return(timerId=void 0,trailing&&lastArgs)?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time,time1=now(),isInvoking=shouldInvoke(time1);if(lastArgs=arguments,lastThis=this,lastCallTime=time1,isInvoking){if(void 0===timerId)return lastInvokeTime=time=lastCallTime,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result;if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function(){return void 0===timerId?result:trailingEdge(now())},debounced}},33448:function(module,__unused_webpack_exports,__webpack_require__){var baseGetTag=__webpack_require__(44239),isObjectLike=__webpack_require__(37005);module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},7771:function(module,__unused_webpack_exports,__webpack_require__){var root=__webpack_require__(55639);module.exports=function(){return root.Date.now()}},14841:function(module,__unused_webpack_exports,__webpack_require__){var baseTrim=__webpack_require__(27561),isObject=__webpack_require__(13218),isSymbol=__webpack_require__(33448),NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}},54005:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return __webpack_require__(2075)}])},2075:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85893),_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(48689),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(84485),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(85402),antd__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(69677),antd__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(32808),antd__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(26713),antd__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(71577),antd__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(93626),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67294),_components_config_FormStatusIndicator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39664),_utils_config_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(90745),_utils_input_statuses__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(41983),_utils_server_status_context__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99519),_utils_urls__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(37174);let{Title,Paragraph}=antd__WEBPACK_IMPORTED_MODULE_6__.Z,NewActionModal=props=>{let{onOk,onCancel,open}=props,[actionUrl,setActionUrl]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[actionTitle,setActionTitle]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[actionDescription,setActionDescription]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[actionIcon,setActionIcon]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[actionColor,setActionColor]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[openExternally,setOpenExternally]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),okButtonProps={disabled:!function(){try{let validationObject=new URL(actionUrl);if("https:"!==validationObject.protocol)return!1}catch(e){return!1}return(0,_utils_urls__WEBPACK_IMPORTED_MODULE_7__.Z)(actionUrl)&&""!==actionTitle}()},onOpenExternallyChanged=checkbox=>{setOpenExternally(checkbox.target.checked)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.Z,{title:"Create New Action",open:open,onOk:function(){onOk(actionUrl,actionTitle,actionDescription,actionIcon,actionColor,openExternally),setActionUrl(""),setActionTitle(""),setActionDescription(""),setActionIcon(""),setActionColor(""),setOpenExternally(!1)},onCancel:onCancel,okButtonProps:okButtonProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:["Add the URL for the external action you want to present."," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_9__.Z,{value:actionUrl,required:!0,placeholder:"https://myserver.com/action (required)",onChange:input=>setActionUrl(input.currentTarget.value.trim()),type:"url",pattern:_utils_urls__WEBPACK_IMPORTED_MODULE_7__.a})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_9__.Z,{value:actionTitle,required:!0,placeholder:"Your action title (required)",onChange:input=>setActionTitle(input.currentTarget.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_9__.Z,{value:actionDescription,placeholder:"Optional description",onChange:input=>setActionDescription(input.currentTarget.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_9__.Z,{value:actionIcon,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:input=>setActionIcon(input.currentTarget.value)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_9__.Z,{type:"color",value:actionColor,onChange:input=>setActionColor(input.currentTarget.value)}),"Optional background color of the action button."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_10__.Z,{checked:openExternally,defaultChecked:openExternally,onChange:onOpenExternallyChanged,children:"Open in a new tab instead of within your page."})]})})},Actions=()=>{let serverStatusData=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_utils_server_status_context__WEBPACK_IMPORTED_MODULE_5__.aC),{serverConfig,setFieldInConfigState}=serverStatusData||{},{externalActions}=serverConfig,[actions,setActions]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[isModalOpen,setIsModalOpen]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[submitStatus,setSubmitStatus]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),resetStates=()=>{setSubmitStatus(null),clearTimeout(null)};async function save(actionsData){await (0,_utils_config_constants__WEBPACK_IMPORTED_MODULE_3__.Si)({apiPath:_utils_config_constants__WEBPACK_IMPORTED_MODULE_3__.os,data:{value:actionsData},onSuccess(){setFieldInConfigState({fieldName:"externalActions",value:actionsData,path:""}),setSubmitStatus((0,_utils_input_statuses__WEBPACK_IMPORTED_MODULE_4__.kg)(_utils_input_statuses__WEBPACK_IMPORTED_MODULE_4__.zv,"Updated.")),setTimeout(resetStates,_utils_config_constants__WEBPACK_IMPORTED_MODULE_3__.sI)},onError(message){console.log(message),setSubmitStatus((0,_utils_input_statuses__WEBPACK_IMPORTED_MODULE_4__.kg)(_utils_input_statuses__WEBPACK_IMPORTED_MODULE_4__.Un,message)),setTimeout(resetStates,_utils_config_constants__WEBPACK_IMPORTED_MODULE_3__.sI)}})}async function handleDelete(action){let actionsData=[...actions],index=actions.findIndex(item=>item.url===action.url);actionsData.splice(index,1);try{setActions(actionsData),save(actionsData)}catch(error){console.error(error)}}async function handleSave(url,title,description,icon,color,openExternally){try{let actionsData=[...actions],updatedActions=actionsData.concat({url,title,description,icon,color,openExternally});setActions(updatedActions),await save(updatedActions)}catch(error){console.error(error)}}(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setActions(externalActions||[])},[externalActions]);let showCreateModal=()=>{setIsModalOpen(!0)},handleModalSaveButton=(actionUrl,actionTitle,actionDescription,actionIcon,actionColor,openExternally)=>{setIsModalOpen(!1),handleSave(actionUrl,actionTitle,actionDescription,actionIcon,actionColor,openExternally)},handleModalCancelButton=()=>{setIsModalOpen(!1)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Title,{children:"External Actions"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Paragraph,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Paragraph,{children:["Read more about how to use actions, with examples, at"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_14__.Z,{rowKey:record=>"".concat(record.title,"-").concat(record.url),columns:[{title:"",key:"delete",render:(text,record)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__.Z,{size:"middle",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__.Z,{onClick:()=>handleDelete(record),icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__.Z,{})})})},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:url=>url?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{style:{width:"2vw"},src:url,alt:""}):null},{title:"Color",dataIndex:"color",key:"color",render:color=>color?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{backgroundColor:color,height:"30px"},children:color}):null},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:openExternally=>openExternally?"In a new tab":"In a modal"}],dataSource:actions,pagination:!1}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__.Z,{type:"primary",onClick:showCreateModal,children:"Create New Action"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_config_FormStatusIndicator__WEBPACK_IMPORTED_MODULE_2__.E,{status:submitStatus}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NewActionModal,{open:isModalOpen,onOk:handleModalSaveButton,onCancel:handleModalCancelButton})]})};__webpack_exports__.default=Actions}},function(__webpack_require__){__webpack_require__.O(0,[8939,3903,4267,3626,9774,2888,179],function(){return __webpack_require__(__webpack_require__.s=54005)}),_N_E=__webpack_require__.O()}]);