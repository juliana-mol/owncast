(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{48689:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return icons_DeleteOutlined}});var objectSpread2=__webpack_require__(1413),react=__webpack_require__(67294),asn_DeleteOutlined={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},AntdIcon=__webpack_require__(42135),DeleteOutlined_DeleteOutlined=function(props,ref){return react.createElement(AntdIcon.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},props),{},{ref:ref,icon:asn_DeleteOutlined}))};DeleteOutlined_DeleteOutlined.displayName="DeleteOutlined";var icons_DeleteOutlined=react.forwardRef(DeleteOutlined_DeleteOutlined)},27561:function(module,__unused_webpack_exports,__webpack_require__){var trimmedEndIndex=__webpack_require__(67990),reTrimStart=/^\s+/;module.exports=function(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}},67990:function(module){var reWhitespace=/\s/;module.exports=function(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}},23279:function(module,__unused_webpack_exports,__webpack_require__){var isObject=__webpack_require__(13218),now=__webpack_require__(7771),toNumber=__webpack_require__(14841),nativeMax=Math.max,nativeMin=Math.min;module.exports=function(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var timeSinceLastCall,timeSinceLastInvoke,timeWaiting,time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,(timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall,maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting))}function trailingEdge(time){return(timerId=void 0,trailing&&lastArgs)?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time,time1=now(),isInvoking=shouldInvoke(time1);if(lastArgs=arguments,lastThis=this,lastCallTime=time1,isInvoking){if(void 0===timerId)return lastInvokeTime=time=lastCallTime,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result;if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function(){return void 0===timerId?result:trailingEdge(now())},debounced}},33448:function(module,__unused_webpack_exports,__webpack_require__){var baseGetTag=__webpack_require__(44239),isObjectLike=__webpack_require__(37005);module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},7771:function(module,__unused_webpack_exports,__webpack_require__){var root=__webpack_require__(55639);module.exports=function(){return root.Date.now()}},14841:function(module,__unused_webpack_exports,__webpack_require__){var baseTrim=__webpack_require__(27561),isObject=__webpack_require__(13218),isSymbol=__webpack_require__(33448),NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}},81009:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return __webpack_require__(87945)}])},87652:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{h:function(){return EditSocialLinks}});var jsx_runtime=__webpack_require__(85893),react=__webpack_require__(67294),typography=__webpack_require__(84485),es_button=__webpack_require__(71577),input=__webpack_require__(69677),table=__webpack_require__(93626),modal=__webpack_require__(85402),CaretUpOutlined=__webpack_require__(10010),CaretDownOutlined=__webpack_require__(39398),DeleteOutlined=__webpack_require__(48689),es_select=__webpack_require__(38939),config_constants=__webpack_require__(90745);let SocialDropdown=param=>{let{iconList,selectedOption,onSelected}=param,handleSelected=value=>{onSelected&&onSelected(value)},inititalSelected=""===selectedOption?null:selectedOption;return(0,jsx_runtime.jsxs)("div",{className:"social-dropdown-container",children:[(0,jsx_runtime.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,jsx_runtime.jsxs)("div",{className:"formfield-container",children:[(0,jsx_runtime.jsx)("div",{className:"label-side",children:(0,jsx_runtime.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,jsx_runtime.jsx)("div",{className:"input-side",children:(0,jsx_runtime.jsxs)(es_select.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:inititalSelected,value:inititalSelected,onSelect:handleSelected,children:[iconList.map(item=>{let{platform,icon,key}=item;return(0,jsx_runtime.jsxs)(es_select.Z.Option,{className:"social-option",value:key,children:[(0,jsx_runtime.jsx)("span",{className:"option-icon",children:(0,jsx_runtime.jsx)("img",{src:icon,alt:"",className:"option-icon"})}),(0,jsx_runtime.jsx)("span",{className:"option-label",children:platform})]},"platform-".concat(key))}),(0,jsx_runtime.jsx)(es_select.Z.Option,{className:"social-option",value:config_constants.z_,children:"Other..."},"platform-".concat(config_constants.z_))]})})]})]})};var apis=__webpack_require__(64777),server_status_context=__webpack_require__(99519),urls=__webpack_require__(37174),TextField=__webpack_require__(40117),input_statuses=__webpack_require__(41983),FormStatusIndicator=__webpack_require__(39664);let{Title}=typography.Z,EditSocialLinks=()=>{let[availableIconsList,setAvailableIconsList]=(0,react.useState)([]),[currentSocialHandles,setCurrentSocialHandles]=(0,react.useState)([]),[displayModal,setDisplayModal]=(0,react.useState)(!1),[displayOther,setDisplayOther]=(0,react.useState)(!1),[modalProcessing,setModalProcessing]=(0,react.useState)(!1),[editId,setEditId]=(0,react.useState)(-1),[modalDataState,setModalDataState]=(0,react.useState)(config_constants.wC),[submitStatus,setSubmitStatus]=(0,react.useState)(null),serverStatusData=(0,react.useContext)(server_status_context.aC),{serverConfig,setFieldInConfigState}=serverStatusData||{},{instanceDetails}=serverConfig,{socialHandles:initialSocialHandles}=instanceDetails,getAvailableIcons=async()=>{try{let result=await (0,apis.rQ)(apis.$i,{auth:!1}),list=Object.keys(result).map(item=>({key:item,...result[item]}));setAvailableIconsList(list)}catch(error){console.log(error)}},isPredefinedSocial=platform=>availableIconsList.find(item=>item.key===platform)||!1,selectedOther=""!==modalDataState.platform&&!availableIconsList.find(item=>item.key===modalDataState.platform);(0,react.useEffect)(()=>{getAvailableIcons()},[]),(0,react.useEffect)(()=>{instanceDetails.socialHandles&&setCurrentSocialHandles(initialSocialHandles)},[instanceDetails]);let resetStates=()=>{setSubmitStatus(null),clearTimeout(null)},resetModal=()=>{setDisplayModal(!1),setEditId(-1),setDisplayOther(!1),setModalProcessing(!1),setModalDataState({...config_constants.wC})},handleModalCancel=()=>{resetModal()},updateModalState=(fieldName,value)=>{setModalDataState({...modalDataState,[fieldName]:value})},handleDropdownSelect=value=>{value===config_constants.z_?(setDisplayOther(!0),updateModalState("platform","")):(setDisplayOther(!1),updateModalState("platform",value))},handleOtherNameChange=event=>{let{value}=event.target;updateModalState("platform",value)},handleUrlChange=param=>{let{value}=param;updateModalState("url",value)},postUpdateToAPI=async postValue=>{await (0,config_constants.Si)({apiPath:config_constants.c9,data:{value:postValue},onSuccess(){setFieldInConfigState({fieldName:"socialHandles",value:postValue,path:"instanceDetails"}),setModalProcessing(!1),handleModalCancel(),setSubmitStatus((0,input_statuses.kg)(input_statuses.zv)),setTimeout(resetStates,config_constants.sI)},onError(message){setSubmitStatus((0,input_statuses.kg)(input_statuses.Un,"There was an error: ".concat(message))),setModalProcessing(!1),setTimeout(resetStates,config_constants.sI)}})},handleModalOk=()=>{setModalProcessing(!0);let postData=currentSocialHandles.length?[...currentSocialHandles]:[];-1===editId?postData.push(modalDataState):postData.splice(editId,1,modalDataState),postUpdateToAPI(postData)},handleDeleteItem=index=>{let postData=[...currentSocialHandles];postData.splice(index,1),postUpdateToAPI(postData)},handleMoveItemUp=index=>{if(index<=0||index>=currentSocialHandles.length)return;let postData=[...currentSocialHandles],tmp=postData[index-1];postData[index-1]=postData[index],postData[index]=tmp,postUpdateToAPI(postData)},handleMoveItemDown=index=>{if(index<0||index>=currentSocialHandles.length-1)return;let postData=[...currentSocialHandles],tmp=postData[index+1];postData[index+1]=postData[index],postData[index]=tmp,postUpdateToAPI(postData)},okButtonProps={disabled:!(0,urls.Z)(modalDataState.url)},otherField=(0,jsx_runtime.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,jsx_runtime.jsx)("div",{className:"label-side"}),(0,jsx_runtime.jsx)("div",{className:"input-side",children:(0,jsx_runtime.jsx)(input.Z,{placeholder:"Other platform name",defaultValue:modalDataState.platform,onChange:handleOtherNameChange})})]});return(0,jsx_runtime.jsxs)("div",{className:"social-links-edit-container",children:[(0,jsx_runtime.jsx)(Title,{level:3,className:"section-title",children:"Your Social Handles"}),(0,jsx_runtime.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,jsx_runtime.jsx)(FormStatusIndicator.E,{status:submitStatus}),(0,jsx_runtime.jsx)(table.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:record=>"".concat(record.platform,"-").concat(record.url),columns:[{title:"Social Link",dataIndex:"",key:"combo",render(data,record){let{platform,url}=record,platformInfo=isPredefinedSocial(platform);if(!platformInfo)return(0,jsx_runtime.jsx)("div",{className:"social-handle-cell",children:(0,jsx_runtime.jsxs)("p",{className:"option-label",children:[(0,jsx_runtime.jsx)("strong",{children:platform}),(0,jsx_runtime.jsx)("span",{className:"handle-url",title:url,children:url})]})});let{icon,platform:platformName}=platformInfo;return(0,jsx_runtime.jsxs)("div",{className:"social-handle-cell",children:[(0,jsx_runtime.jsx)("span",{className:"option-icon",children:(0,jsx_runtime.jsx)("img",{src:icon,alt:"",className:"option-icon"})}),(0,jsx_runtime.jsxs)("p",{className:"option-label",children:[(0,jsx_runtime.jsx)("strong",{children:platformName}),(0,jsx_runtime.jsx)("span",{className:"handle-url",title:url,children:url})]})]})}},{title:"",dataIndex:"",key:"edit",render:(data,record,index)=>(0,jsx_runtime.jsxs)("div",{className:"actions",children:[(0,jsx_runtime.jsx)(es_button.Z,{size:"small",onClick(){let platformInfo=currentSocialHandles[index];setEditId(index),setModalDataState({...platformInfo}),setDisplayModal(!0),isPredefinedSocial(platformInfo.platform)||setDisplayOther(!0)},children:"Edit"}),(0,jsx_runtime.jsx)(es_button.Z,{icon:(0,jsx_runtime.jsx)(CaretUpOutlined.Z,{}),size:"small",hidden:0===index,onClick:()=>handleMoveItemUp(index)}),(0,jsx_runtime.jsx)(es_button.Z,{icon:(0,jsx_runtime.jsx)(CaretDownOutlined.Z,{}),size:"small",hidden:index===currentSocialHandles.length-1,onClick:()=>handleMoveItemDown(index)}),(0,jsx_runtime.jsx)(es_button.Z,{className:"delete-button",icon:(0,jsx_runtime.jsx)(DeleteOutlined.Z,{}),size:"small",onClick:()=>handleDeleteItem(index)})]})}],dataSource:currentSocialHandles}),(0,jsx_runtime.jsx)(modal.Z,{title:"Edit Social Handle",open:displayModal,onOk:handleModalOk,onCancel:handleModalCancel,confirmLoading:modalProcessing,okButtonProps:okButtonProps,children:(0,jsx_runtime.jsxs)("div",{className:"social-handle-modal-content",children:[(0,jsx_runtime.jsx)(SocialDropdown,{iconList:availableIconsList,selectedOption:selectedOther?config_constants.z_:modalDataState.platform,onSelected:handleDropdownSelect}),displayOther&&otherField,(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TextField.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[modalDataState.platform]||"Url to page",value:modalDataState.url,onChange:handleUrlChange,useTrim:!0,type:"url",pattern:urls.a}),(0,jsx_runtime.jsx)(FormStatusIndicator.E,{status:submitStatus})]})}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(es_button.Z,{type:"primary",onClick(){resetModal(),setDisplayModal(!0)},children:"Add a new social link"})]})}},87945:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return ConfigSocialThings}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85893);__webpack_require__(67294);var antd__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(84485),_components_config_EditSocialLinks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87652);let{Title}=antd__WEBPACK_IMPORTED_MODULE_3__.Z;function ConfigSocialThings(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"config-social-items",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Title,{children:"Social Items"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_config_EditSocialLinks__WEBPACK_IMPORTED_MODULE_2__.h,{})]})}}},function(__webpack_require__){__webpack_require__.O(0,[8939,3903,4267,3626,9774,2888,179],function(){return __webpack_require__(__webpack_require__.s=81009)}),_N_E=__webpack_require__.O()}]);